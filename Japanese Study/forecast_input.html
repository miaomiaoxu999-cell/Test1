<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>数据输入 - 加油站销量预测系统</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="css/forecast_style.css">
</head>
<body>
    <!-- 导航栏 -->
    <header class="navbar navbar-expand-lg navbar-dark bg-primary fixed-top">
        <div class="container">
            <a class="navbar-brand" href="forecast_index.html">
                <i class="fas fa-chart-line"></i> 加油站销量预测系统
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="forecast_index.html">首页</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" aria-current="page" href="forecast_input.html">数据输入</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="forecast_result.html">预测结果</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="forecast_history.html">历史记录</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="forecast_settings.html">设置</a>
                    </li>
                </ul>
            </div>
        </div>
    </header>

    <!-- 主要内容 -->
    <main class="main-content">
        <section class="data-input-section">
            <div class="container">
                <div class="row justify-content-center">
                    <div class="col-lg-10">
                        <div class="card shadow-sm">
                            <div class="card-header bg-primary text-white">
                                <h2 class="h4 mb-0">
                                    <i class="fas fa-database"></i> 数据输入
                                </h2>
                            </div>
                            <div class="card-body">
                                <form id="dataForm">
                                    <!-- 加油站基本信息 -->
                                    <div class="input-card">
                                        <h3>
                                            <i class="fas fa-gas-pump"></i> 加油站基本信息
                                        </h3>
                                        <div class="row g-3">
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <label for="stationName" class="form-label">加油站名称</label>
                                                    <input type="text" class="form-control" id="stationName" name="stationName" required placeholder="请输入加油站名称">
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <label for="stationLocation" class="form-label">加油站位置</label>
                                                    <input type="text" class="form-control" id="stationLocation" name="stationLocation" required placeholder="请输入加油站地址">
                                                </div>
                                            </div>
                                            <div class="col-md-4">
                                                <div class="form-group">
                                                    <label for="stationSize" class="form-label">加油站规模</label>
                                                    <select class="form-select" id="stationSize" name="stationSize" required>
                                                        <option value="">请选择规模</option>
                                                        <option value="小型">小型</option>
                                                        <option value="中型">中型</option>
                                                        <option value="大型">大型</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="col-md-4">
                                                <div class="form-group">
                                                    <label for="fuelTypes" class="form-label">油品类型数量</label>
                                                    <input type="number" class="form-control" id="fuelTypes" name="fuelTypes" required placeholder="请输入油品类型数量" min="1">
                                                </div>
                                            </div>
                                            <div class="col-md-4">
                                                <div class="form-group">
                                                    <label for="competitors" class="form-label">周边竞争对手数量</label>
                                                    <input type="number" class="form-control" id="competitors" name="competitors" required placeholder="请输入竞争对手数量" min="0">
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- 数据输入方式选择 -->
                                    <div class="input-card">
                                        <h3>
                                            <i class="fas fa-file-import"></i> 数据输入方式
                                        </h3>
                                        <div class="row g-3">
                                            <div class="col-md-6">
                                                <div class="form-check">
                                                    <input class="form-check-input" type="radio" name="inputMethod" id="manualInput" value="manual" checked>
                                                    <label class="form-check-label" for="manualInput">
                                                        <i class="fas fa-keyboard"></i> 手动输入
                                                    </label>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="form-check">
                                                    <input class="form-check-input" type="radio" name="inputMethod" id="fileUpload" value="file">
                                                    <label class="form-check-label" for="fileUpload">
                                                        <i class="fas fa-file-upload"></i> 文件上传
                                                    </label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- 文件上传区域 -->
                                    <div class="input-card" id="fileUploadSection" style="display: none;">
                                        <h3>
                                            <i class="fas fa-file-excel"></i> 文件上传
                                        </h3>
                                        <div class="mb-3">
                                            <p class="text-muted">支持CSV、Excel格式文件上传，建议使用提供的数据模板</p>
                                            <a href="#" class="btn btn-outline-secondary btn-sm mb-3">
                                                <i class="fas fa-download"></i> 下载数据模板
                                            </a>
                                        </div>
                                        <div id="fileUploadArea" class="file-upload-area">
                                            <input type="file" id="fileInput" name="dataFile" accept=".csv,.xlsx,.xls" style="display: none;">
                                            <div class="file-upload-icon">
                                                <i class="fas fa-cloud-upload-alt"></i>
                                            </div>
                                            <p>点击或拖拽文件到此处上传</p>
                                            <p class="text-sm text-muted">支持CSV、Excel格式，文件大小不超过10MB</p>
                                        </div>
                                        <div id="fileNameDisplay" class="mt-3 text-muted"></div>
                                    </div>

                                    <!-- 手动输入区域 -->
                                    <div class="input-card" id="manualInputSection">
                                        <h3>
                                            <i class="fas fa-table"></i> 历史数据手动输入
                                        </h3>
                                        <p class="text-muted mb-3">请输入至少3个月的历史数据，数据越丰富，预测结果越准确</p>
                                        
                                        <div class="table-responsive">
                                            <table id="dataTable" class="table table-bordered">
                                                <thead class="table-light">
                                                    <tr>
                                                        <th>日期</th>
                                                        <th>销量（升）</th>
                                                        <th>平均温度（℃）</th>
                                                        <th>降雨量（mm）</th>
                                                        <th>交通流量（辆）</th>
                                                        <th>是否节假日</th>
                                                        <th>操作</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <!-- 初始数据行 -->
                                                    <tr>
                                                        <td><input type="date" class="form-control" name="date[]" required></td>
                                                        <td><input type="number" class="form-control" name="sales[]" required placeholder="0" step="0.1"></td>
                                                        <td><input type="number" class="form-control" name="temperature[]" required placeholder="0" step="0.1"></td>
                                                        <td><input type="number" class="form-control" name="rainfall[]" required placeholder="0" step="0.1"></td>
                                                        <td><input type="number" class="form-control" name="traffic[]" required placeholder="0" step="1"></td>
                                                        <td>
                                                            <select class="form-select" name="holiday[]" required>
                                                                <option value="否">否</option>
                                                                <option value="是">是</option>
                                                            </select>
                                                        </td>
                                                        <td>
                                                            <button type="button" class="btn btn-danger btn-sm delete-row">
                                                                <i class="fas fa-trash"></i> 删除
                                                            </button>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                        
                                        <div class="mt-3">
                                            <button type="button" id="addRowBtn" class="btn btn-secondary">
                                                <i class="fas fa-plus"></i> 添加数据行
                                            </button>
                                        </div>
                                    </div>

                                    <!-- 其他影响因素 -->
                                    <div class="input-card">
                                        <h3>
                                            <i class="fas fa-exclamation-triangle"></i> 其他影响因素
                                        </h3>
                                        <div class="row g-3">
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <label for="promotion" class="form-label">近期促销活动</label>
                                                    <textarea class="form-control" id="promotion" name="promotion" rows="3" placeholder="请描述近期是否有促销活动及具体内容"></textarea>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <label for="specialEvents" class="form-label">周边特殊事件</label>
                                                    <textarea class="form-control" id="specialEvents" name="specialEvents" rows="3" placeholder="请描述周边是否有特殊事件（如展会、演唱会等）"></textarea>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <label for="oilPriceChange" class="form-label">近期油价变动</label>
                                                    <input type="number" class="form-control" id="oilPriceChange" name="oilPriceChange" placeholder="请输入近期油价变动百分比（%）" step="0.1">
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <label for="otherFactors" class="form-label">其他影响因素</label>
                                                    <textarea class="form-control" id="otherFactors" name="otherFactors" rows="3" placeholder="请描述其他可能影响销量的因素"></textarea>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- 预测参数设置 -->
                                    <div class="input-card">
                                        <h3>
                                            <i class="fas fa-cog"></i> 预测参数设置
                                        </h3>
                                        <div class="row g-3">
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <label for="forecastModel" class="form-label">预测模型选择</label>
                                                    <select class="form-select" id="forecastModel" name="forecastModel" required>
                                                        <option value="arima">ARIMA时间序列模型</option>
                                                        <option value="randomForest">随机森林模型</option>
                                                        <option value="gradientBoosting">梯度提升树模型</option>
                                                        <option value="lstm">LSTM神经网络模型</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <label for="confidenceLevel" class="form-label">置信水平</label>
                                                    <select class="form-select" id="confidenceLevel" name="confidenceLevel" required>
                                                        <option value="0.90">90%</option>
                                                        <option value="0.95" selected>95%</option>
                                                        <option value="0.99">99%</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- 提交按钮 -->
                                    <div class="d-grid gap-2 d-sm-flex justify-content-sm-center mt-4">
                                        <button type="submit" class="btn btn-primary btn-lg">
                                            <i class="fas fa-play-circle"></i> 开始预测
                                        </button>
                                        <button type="reset" class="btn btn-secondary btn-lg">
                                            <i class="fas fa-redo"></i> 重置表单
                                        </button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- 页脚 -->
    <footer class="footer bg-dark text-white py-6">
        <div class="container">
            <div class="row g-4">
                <div class="col-lg-4">
                    <h3 class="h5 mb-3">加油站销量预测系统</h3>
                    <p class="text-muted">基于大数据和人工智能技术，为您提供准确的加油站销量预测和数据分析服务</p>
                </div>
                <div class="col-lg-4">
                    <h3 class="h5 mb-3">快速链接</h3>
                    <ul class="list-unstyled">
                        <li><a href="forecast_index.html" class="text-muted text-decoration-none"><i class="fas fa-home me-2"></i> 首页</a></li>
                        <li><a href="forecast_input.html" class="text-muted text-decoration-none"><i class="fas fa-upload me-2"></i> 数据输入</a></li>
                        <li><a href="forecast_result.html" class="text-muted text-decoration-none"><i class="fas fa-chart-line me-2"></i> 预测结果</a></li>
                        <li><a href="forecast_history.html" class="text-muted text-decoration-none"><i class="fas fa-history me-2"></i> 历史记录</a></li>
                    </ul>
                </div>
                <div class="col-lg-4">
                    <h3 class="h5 mb-3">联系我们</h3>
                    <ul class="list-unstyled">
                        <li class="text-muted"><i class="fas fa-envelope me-2"></i> contact@forecast-system.com</li>
                        <li class="text-muted"><i class="fas fa-phone me-2"></i> 400-123-4567</li>
                        <li class="text-muted"><i class="fas fa-map-marker-alt me-2"></i> 北京市朝阳区科技园</li>
                    </ul>
                </div>
            </div>
            <div class="border-top border-gray-700 mt-6 pt-6 text-center text-muted">
                <p>&copy; 2023 加油站销量预测系统. 保留所有权利.</p>
            </div>
        </div>
    </footer>

    <!-- JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
    <script src="js/forecast_main.js"></script>
    <script>
        // 数据输入方式切换
        const inputMethodRadios = document.querySelectorAll('input[name="inputMethod"]');
        const manualInputSection = document.getElementById('manualInputSection');
        const fileUploadSection = document.getElementById('fileUploadSection');
        
        inputMethodRadios.forEach(radio => {
            radio.addEventListener('change', () => {
                if (radio.value === 'manual') {
                    manualInputSection.style.display = 'block';
                    fileUploadSection.style.display = 'none';
                } else {
                    manualInputSection.style.display = 'none';
                    fileUploadSection.style.display = 'block';
                }
            });
        });
        
        // 删除行功能
        document.addEventListener('click', (e) => {
            if (e.target.classList.contains('delete-row')) {
                const row = e.target.closest('tr');
                const tableBody = row.closest('tbody');
                if (tableBody.rows.length > 1) {
                    row.remove();
                } else {
                    alert('至少需要保留一行数据');
                }
            }
        });
    </script>
</body>
</html>