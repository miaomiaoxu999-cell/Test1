import{_ as ie,r as g,i as B,G as ue,a as i,b as C,c as re,e as n,d as e,w as l,E as w,u as b,g as pe,h as o,k as ce,H as _e,I as ve,n as r,J as fe,K as me,C as ye,v as S,y as D}from"./index-273e1fb1.js";const ge={class:"system-feedback"},be={class:"page-header"},ke={class:"header-actions"},Ce={class:"stat-content"},we={class:"stat-icon positive"},Ve={class:"stat-info"},xe={class:"stat-value"},Ie={class:"stat-content"},Se={class:"stat-icon neutral"},De={class:"stat-info"},he={class:"stat-value"},Te={class:"stat-content"},Ae={class:"stat-icon negative"},Ue={class:"stat-info"},ze={class:"stat-value"},Fe={class:"stat-content"},Ne={class:"stat-icon total"},Be={class:"stat-info"},Re={class:"stat-value"},$e={class:"card-header"},Ee={class:"header-filter"},Pe={class:"pagination"},Ye={style:{padding:"10px",background:"#f5f5f5","border-radius":"4px"}},Le={style:{padding:"10px",background:"#e8f4fd","border-radius":"4px"}},Me={__name:"SystemFeedback",setup(Oe){const V=g(!1),x=g(!1),h=g(1),U=g(10),G=g(50),c=B({type:"",sentiment:"",dateRange:[]}),u=B({type:"accuracy",sentiment:"neutral",predictionId:"",content:""}),d=g({}),y=B({positiveCount:25,neutralCount:15,negativeCount:10,totalCount:50}),z=g([{id:1,userName:"张经理",type:"accuracy",sentiment:"positive",content:"昨天的充电量预测非常准确，误差在5%以内，对我们的运营决策很有帮助。",predictionId:"P20231001001",createdAt:"2023-10-01 09:30:00",status:"resolved",response:"感谢您的反馈，我们会继续优化模型精度。",resolvedAt:"2023-10-01 10:00:00",resolvedBy:"系统管理员"},{id:2,userName:"李主管",type:"pricing",sentiment:"negative",content:"建议的价格调整幅度过大，可能会影响客户体验，建议更温和的调整策略。",predictionId:"P20231001002",createdAt:"2023-10-01 14:20:00",status:"pending"}]),H=ue(()=>{let s=z.value;if(c.type&&(s=s.filter(t=>t.type===c.type)),c.sentiment&&(s=s.filter(t=>t.sentiment===c.sentiment)),c.dateRange&&c.dateRange.length===2){const[t,f]=c.dateRange;s=s.filter(_=>_.createdAt>=t&&_.createdAt<=f)}return s}),R=s=>({accuracy:"success",pricing:"warning",stability:"danger",ux:"info",other:""})[s]||"",$=s=>({accuracy:"预测准确度",pricing:"价格合理性",stability:"系统稳定性",ux:"用户体验",other:"其他"})[s]||"未知",E=s=>({positive:"success",neutral:"info",negative:"danger"})[s]||"",P=s=>({positive:"正面",neutral:"中性",negative:"负面"})[s]||"未知",Y=s=>({pending:"warning",resolved:"success",closed:"info"})[s]||"",L=s=>({pending:"待处理",resolved:"已处理",closed:"已关闭"})[s]||"未知",J=()=>{h.value=1,w.success("筛选完成")},K=()=>{w.success("反馈数据导出成功")},q=()=>{w.success("数据已刷新")},Q=s=>{d.value=s,V.value=!0},M=async s=>{s.status="resolved",s.resolvedAt=new Date().toISOString().split("T")[0]+" "+new Date().toTimeString().split(" ")[0],s.resolvedBy="当前用户",s.response="感谢您的反馈，我们已经关注到这个问题并会进行优化。",w.success("反馈已标记为已处理"),V.value=!1},W=()=>{if(!u.content.trim()){w.warning("请输入反馈内容");return}const s={id:z.value.length+1,userName:"当前用户",type:u.type,sentiment:u.sentiment,content:u.content,predictionId:u.predictionId,createdAt:new Date().toISOString().split("T")[0]+" "+new Date().toTimeString().split(" ")[0],status:"pending"};z.value.unshift(s),y.totalCount++,u.sentiment==="positive"?y.positiveCount++:u.sentiment==="neutral"?y.neutralCount++:u.sentiment==="negative"&&y.negativeCount++,Object.assign(u,{type:"accuracy",sentiment:"neutral",predictionId:"",content:""}),x.value=!1,w.success("反馈提交成功")},X=s=>{U.value=s},Z=s=>{h.value=s};return(s,t)=>{const f=i("el-icon"),_=i("el-button"),I=i("el-card"),T=i("el-col"),ee=i("el-row"),p=i("el-option"),F=i("el-select"),te=i("el-date-picker"),m=i("el-table-column"),k=i("el-tag"),le=i("el-table"),ae=i("el-pagination"),v=i("el-descriptions-item"),se=i("el-descriptions"),O=i("el-dialog"),A=i("el-form-item"),N=i("el-radio"),ne=i("el-radio-group"),j=i("el-input"),oe=i("el-form");return C(),re("div",ge,[n("div",be,[t[18]||(t[18]=n("h2",null,"系统反馈",-1)),n("div",ke,[e(_,{type:"primary",onClick:K},{default:l(()=>[e(f,null,{default:l(()=>[e(b(pe))]),_:1}),t[15]||(t[15]=o(" 导出反馈 ",-1))]),_:1}),e(_,{onClick:q},{default:l(()=>[e(f,null,{default:l(()=>[e(b(ce))]),_:1}),t[16]||(t[16]=o(" 刷新 ",-1))]),_:1}),e(_,{type:"success",onClick:t[0]||(t[0]=a=>x.value=!0)},{default:l(()=>[e(f,null,{default:l(()=>[e(b(_e))]),_:1}),t[17]||(t[17]=o(" 提交反馈 ",-1))]),_:1})])]),e(ee,{gutter:20,class:"feedback-stats"},{default:l(()=>[e(T,{span:6},{default:l(()=>[e(I,{class:"stat-card"},{default:l(()=>[n("div",Ce,[n("div",we,[e(f,null,{default:l(()=>[e(b(ve))]),_:1})]),n("div",Ve,[n("div",xe,r(y.positiveCount),1),t[19]||(t[19]=n("div",{class:"stat-label"},"正面反馈",-1))])])]),_:1})]),_:1}),e(T,{span:6},{default:l(()=>[e(I,{class:"stat-card"},{default:l(()=>[n("div",Ie,[n("div",Se,[e(f,null,{default:l(()=>[e(b(fe))]),_:1})]),n("div",De,[n("div",he,r(y.neutralCount),1),t[20]||(t[20]=n("div",{class:"stat-label"},"中性反馈",-1))])])]),_:1})]),_:1}),e(T,{span:6},{default:l(()=>[e(I,{class:"stat-card"},{default:l(()=>[n("div",Te,[n("div",Ae,[e(f,null,{default:l(()=>[e(b(me))]),_:1})]),n("div",Ue,[n("div",ze,r(y.negativeCount),1),t[21]||(t[21]=n("div",{class:"stat-label"},"负面反馈",-1))])])]),_:1})]),_:1}),e(T,{span:6},{default:l(()=>[e(I,{class:"stat-card"},{default:l(()=>[n("div",Fe,[n("div",Ne,[e(f,null,{default:l(()=>[e(b(ye))]),_:1})]),n("div",Be,[n("div",Re,r(y.totalCount),1),t[22]||(t[22]=n("div",{class:"stat-label"},"总反馈数",-1))])])]),_:1})]),_:1})]),_:1}),e(I,{class:"feedback-list"},{header:l(()=>[n("div",$e,[t[24]||(t[24]=n("span",null,"反馈列表",-1)),n("div",Ee,[e(F,{modelValue:c.type,"onUpdate:modelValue":t[1]||(t[1]=a=>c.type=a),placeholder:"反馈类型",style:{width:"120px"}},{default:l(()=>[e(p,{label:"全部",value:""}),e(p,{label:"预测准确度",value:"accuracy"}),e(p,{label:"价格合理性",value:"pricing"}),e(p,{label:"系统稳定性",value:"stability"}),e(p,{label:"用户体验",value:"ux"}),e(p,{label:"其他",value:"other"})]),_:1},8,["modelValue"]),e(F,{modelValue:c.sentiment,"onUpdate:modelValue":t[2]||(t[2]=a=>c.sentiment=a),placeholder:"情感倾向",style:{width:"120px","margin-left":"10px"}},{default:l(()=>[e(p,{label:"全部",value:""}),e(p,{label:"正面",value:"positive"}),e(p,{label:"中性",value:"neutral"}),e(p,{label:"负面",value:"negative"})]),_:1},8,["modelValue"]),e(te,{modelValue:c.dateRange,"onUpdate:modelValue":t[3]||(t[3]=a=>c.dateRange=a),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"YYYY-MM-DD",style:{"margin-left":"10px"}},null,8,["modelValue"]),e(_,{type:"primary",onClick:J,style:{"margin-left":"10px"}},{default:l(()=>[...t[23]||(t[23]=[o("筛选",-1)])]),_:1})])])]),default:l(()=>[e(le,{data:H.value,stripe:"",style:{width:"100%"}},{default:l(()=>[e(m,{prop:"id",label:"ID",width:"80"}),e(m,{prop:"userName",label:"用户",width:"120"}),e(m,{prop:"type",label:"类型",width:"120"},{default:l(({row:a})=>[e(k,{type:R(a.type)},{default:l(()=>[o(r($(a.type)),1)]),_:2},1032,["type"])]),_:1}),e(m,{prop:"sentiment",label:"情感",width:"100"},{default:l(({row:a})=>[e(k,{type:E(a.sentiment)},{default:l(()=>[o(r(P(a.sentiment)),1)]),_:2},1032,["type"])]),_:1}),e(m,{prop:"content",label:"反馈内容","min-width":"200","show-overflow-tooltip":""}),e(m,{prop:"predictionId",label:"预测ID",width:"100"}),e(m,{prop:"createdAt",label:"提交时间",width:"180"}),e(m,{prop:"status",label:"状态",width:"100"},{default:l(({row:a})=>[e(k,{type:Y(a.status)},{default:l(()=>[o(r(L(a.status)),1)]),_:2},1032,["type"])]),_:1}),e(m,{label:"操作",width:"120",fixed:"right"},{default:l(({row:a})=>[e(_,{type:"text",size:"small",onClick:de=>Q(a)},{default:l(()=>[...t[25]||(t[25]=[o("查看",-1)])]),_:1},8,["onClick"]),a.status==="pending"?(C(),S(_,{key:0,type:"text",size:"small",onClick:de=>M(a)},{default:l(()=>[...t[26]||(t[26]=[o("处理",-1)])]),_:1},8,["onClick"])):D("",!0)]),_:1})]),_:1},8,["data"]),n("div",Pe,[e(ae,{"current-page":h.value,"onUpdate:currentPage":t[4]||(t[4]=a=>h.value=a),"page-size":U.value,"onUpdate:pageSize":t[5]||(t[5]=a=>U.value=a),"page-sizes":[10,20,50,100],total:G.value,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:X,onCurrentChange:Z},null,8,["current-page","page-size","total"])])]),_:1}),e(O,{modelValue:V.value,"onUpdate:modelValue":t[8]||(t[8]=a=>V.value=a),title:"反馈详情",width:"600px"},{footer:l(()=>[e(_,{onClick:t[6]||(t[6]=a=>V.value=!1)},{default:l(()=>[...t[27]||(t[27]=[o("关闭",-1)])]),_:1}),d.value.status==="pending"?(C(),S(_,{key:0,type:"primary",onClick:t[7]||(t[7]=a=>M(d.value))},{default:l(()=>[...t[28]||(t[28]=[o("标记为已处理",-1)])]),_:1})):D("",!0)]),default:l(()=>[e(se,{column:2,border:""},{default:l(()=>[e(v,{label:"反馈ID"},{default:l(()=>[o(r(d.value.id),1)]),_:1}),e(v,{label:"用户"},{default:l(()=>[o(r(d.value.userName),1)]),_:1}),e(v,{label:"反馈类型"},{default:l(()=>[e(k,{type:R(d.value.type)},{default:l(()=>[o(r($(d.value.type)),1)]),_:1},8,["type"])]),_:1}),e(v,{label:"情感倾向"},{default:l(()=>[e(k,{type:E(d.value.sentiment)},{default:l(()=>[o(r(P(d.value.sentiment)),1)]),_:1},8,["type"])]),_:1}),e(v,{label:"预测ID"},{default:l(()=>[o(r(d.value.predictionId||"无"),1)]),_:1}),e(v,{label:"提交时间"},{default:l(()=>[o(r(d.value.createdAt),1)]),_:1}),e(v,{label:"状态"},{default:l(()=>[e(k,{type:Y(d.value.status)},{default:l(()=>[o(r(L(d.value.status)),1)]),_:1},8,["type"])]),_:1}),e(v,{label:"反馈内容",span:2},{default:l(()=>[n("div",Ye,r(d.value.content),1)]),_:1}),d.value.response?(C(),S(v,{key:0,label:"处理回复",span:2},{default:l(()=>[n("div",Le,r(d.value.response),1)]),_:1})):D("",!0),d.value.resolvedAt?(C(),S(v,{key:1,label:"处理时间"},{default:l(()=>[o(r(d.value.resolvedAt),1)]),_:1})):D("",!0),d.value.resolvedBy?(C(),S(v,{key:2,label:"处理人"},{default:l(()=>[o(r(d.value.resolvedBy),1)]),_:1})):D("",!0)]),_:1})]),_:1},8,["modelValue"]),e(O,{modelValue:x.value,"onUpdate:modelValue":t[14]||(t[14]=a=>x.value=a),title:"提交反馈",width:"500px"},{footer:l(()=>[e(_,{onClick:t[13]||(t[13]=a=>x.value=!1)},{default:l(()=>[...t[32]||(t[32]=[o("取消",-1)])]),_:1}),e(_,{type:"primary",onClick:W},{default:l(()=>[...t[33]||(t[33]=[o("提交",-1)])]),_:1})]),default:l(()=>[e(oe,{model:u,"label-width":"80px"},{default:l(()=>[e(A,{label:"反馈类型"},{default:l(()=>[e(F,{modelValue:u.type,"onUpdate:modelValue":t[9]||(t[9]=a=>u.type=a),placeholder:"请选择反馈类型"},{default:l(()=>[e(p,{label:"预测准确度",value:"accuracy"}),e(p,{label:"价格合理性",value:"pricing"}),e(p,{label:"系统稳定性",value:"stability"}),e(p,{label:"用户体验",value:"ux"}),e(p,{label:"其他",value:"other"})]),_:1},8,["modelValue"])]),_:1}),e(A,{label:"情感倾向"},{default:l(()=>[e(ne,{modelValue:u.sentiment,"onUpdate:modelValue":t[10]||(t[10]=a=>u.sentiment=a)},{default:l(()=>[e(N,{label:"positive"},{default:l(()=>[...t[29]||(t[29]=[o("正面",-1)])]),_:1}),e(N,{label:"neutral"},{default:l(()=>[...t[30]||(t[30]=[o("中性",-1)])]),_:1}),e(N,{label:"negative"},{default:l(()=>[...t[31]||(t[31]=[o("负面",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(A,{label:"预测ID"},{default:l(()=>[e(j,{modelValue:u.predictionId,"onUpdate:modelValue":t[11]||(t[11]=a=>u.predictionId=a),placeholder:"可选，关联的预测ID"},null,8,["modelValue"])]),_:1}),e(A,{label:"反馈内容"},{default:l(()=>[e(j,{modelValue:u.content,"onUpdate:modelValue":t[12]||(t[12]=a=>u.content=a),type:"textarea",rows:4,placeholder:"请输入您的反馈内容...",maxlength:"500","show-word-limit":""},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}},Ge=ie(Me,[["__scopeId","data-v-cf54767b"]]);export{Ge as default};
