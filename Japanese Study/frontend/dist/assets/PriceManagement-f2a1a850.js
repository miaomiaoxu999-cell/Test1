import{i as $}from"./index-93dc7d7c.js";import{_ as ee,i as C,r as v,x as L,o as le,a as u,b,c as te,e as a,d as e,w as t,v as V,y as S,E as j,u as B,z as ae,h as W,k as ie,t as oe,n as d,B as G}from"./index-273e1fb1.js";const ne={class:"price-management"},se={class:"page-header"},de={class:"header-actions"},re={style:{"margin-left":"10px"}},ue={style:{"margin-left":"10px"}},pe={style:{"margin-left":"10px"}},me={style:{"margin-left":"10px"}},ve={style:{"margin-left":"10px"}},ce={class:"price-preview"},fe={class:"preview-item"},be={class:"preview-value"},_e={class:"preview-item"},ye={class:"preview-value"},ge={class:"preview-item"},xe={class:"revenue-prediction"},Ve={class:"revenue-item"},Se={class:"revenue-value"},we={class:"revenue-item"},Pe={class:"revenue-value"},Fe={class:"revenue-item"},he={class:"revenue-item"},ke={__name:"PriceManagement",setup(ze){const o=C({baseStrategy:"time_based",basePrice:.8,adjustmentFrequency:"hourly",maxPriceChange:20,enableOptimization:!0}),T=C([{timeSlot:"00:00-06:00",priceMultiplier:.6,description:"低谷时段"},{timeSlot:"06:00-10:00",priceMultiplier:1.2,description:"早高峰"},{timeSlot:"10:00-14:00",priceMultiplier:.8,description:"平峰时段"},{timeSlot:"14:00-18:00",priceMultiplier:1.5,description:"晚高峰"},{timeSlot:"18:00-22:00",priceMultiplier:1,description:"平峰时段"},{timeSlot:"22:00-24:00",priceMultiplier:.7,description:"低谷时段"}]),r=C({demandSensitivity:.7,competitionSensitivity:.5,costFactor:1,priceElasticity:-1.2}),m=C({competitorPrice:.85,pricingStrategy:"match",priceDifference:.05}),p=C({optimizationGoal:"revenue",optimizationAlgorithm:"gradient",optimizationFrequency:"hourly",historyDays:30}),w=v(.8),U=v(.85),_=v(.05),P=v(12e3),M=v(13500),y=v(1500),F=v(12.5),q=v(null);let h=null;L(()=>o.basePrice,A=>{g()}),L(()=>o.baseStrategy,A=>{g()});const g=()=>{U.value=w.value+Math.random()*.1-.05,_.value=U.value-w.value,M.value=P.value*(1+_.value/w.value*.8),y.value=M.value-P.value,F.value=y.value/P.value*100,N()},N=()=>{if(!h)return;const A={tooltip:{trigger:"axis"},legend:{data:["当前价格","建议价格","预测收益"]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:["00:00","04:00","08:00","12:00","16:00","20:00","24:00"]},yAxis:[{type:"value",name:"价格(元/kWh)",min:0,max:2},{type:"value",name:"收益(元)",min:0,max:2e3}],series:[{name:"当前价格",type:"line",yAxisIndex:0,data:[.6,.6,1.2,.8,1.5,1,.7]},{name:"建议价格",type:"line",yAxisIndex:0,data:[.65,.65,1.1,.85,1.4,.95,.75]},{name:"预测收益",type:"line",yAxisIndex:1,data:[800,750,1200,900,1500,1100,850]}]};h.setOption(A)},H=()=>{q.value&&(h=$(q.value),N())},J=()=>{j.success("价格策略应用成功"),w.value=U.value,P.value=M.value,g()},K=()=>{Object.assign(o,{baseStrategy:"time_based",basePrice:.8,adjustmentFrequency:"hourly",maxPriceChange:20,enableOptimization:!0}),Object.assign(r,{demandSensitivity:.7,competitionSensitivity:.5,costFactor:1,priceElasticity:-1.2}),j.success("价格配置已重置为默认值"),g()},Q=()=>{j.success("收益模拟完成"),g()};return le(()=>{H(),g()}),window.addEventListener("resize",()=>{h&&h.resize()}),(A,l)=>{const D=u("el-icon"),I=u("el-button"),n=u("el-option"),x=u("el-select"),s=u("el-form-item"),k=u("el-input-number"),z=u("el-slider"),X=u("el-switch"),E=u("el-form"),c=u("el-card"),O=u("el-table-column"),Y=u("el-table"),f=u("el-col"),R=u("el-row");return b(),te("div",ne,[a("div",se,[l[19]||(l[19]=a("h2",null,"价格管理",-1)),a("div",de,[e(I,{type:"primary",onClick:J},{default:t(()=>[e(D,null,{default:t(()=>[e(B(ae))]),_:1}),l[16]||(l[16]=W(" 应用价格策略 ",-1))]),_:1}),e(I,{onClick:K},{default:t(()=>[e(D,null,{default:t(()=>[e(B(ie))]),_:1}),l[17]||(l[17]=W(" 重置价格 ",-1))]),_:1}),e(I,{type:"success",onClick:Q},{default:t(()=>[e(D,null,{default:t(()=>[e(B(oe))]),_:1}),l[18]||(l[18]=W(" 收益模拟 ",-1))]),_:1})])]),e(c,{class:"price-card"},{header:t(()=>[...l[20]||(l[20]=[a("div",{class:"card-header"},[a("span",null,"价格策略设置")],-1)])]),default:t(()=>[e(E,{model:o,"label-width":"120px"},{default:t(()=>[e(s,{label:"基础价格策略"},{default:t(()=>[e(x,{modelValue:o.baseStrategy,"onUpdate:modelValue":l[0]||(l[0]=i=>o.baseStrategy=i),placeholder:"请选择基础价格策略"},{default:t(()=>[e(n,{label:"固定价格",value:"fixed"}),e(n,{label:"分时定价",value:"time_based"}),e(n,{label:"动态定价",value:"dynamic"}),e(n,{label:"竞争定价",value:"competitive"})]),_:1},8,["modelValue"])]),_:1}),o.baseStrategy!=="competitive"?(b(),V(s,{key:0,label:"基础电价"},{default:t(()=>[e(k,{modelValue:o.basePrice,"onUpdate:modelValue":l[1]||(l[1]=i=>o.basePrice=i),min:.5,max:2,step:.01,precision:2},null,8,["modelValue"]),l[21]||(l[21]=a("span",{style:{"margin-left":"10px"}},"元/kWh",-1))]),_:1})):S("",!0),e(s,{label:"价格调整频率"},{default:t(()=>[e(x,{modelValue:o.adjustmentFrequency,"onUpdate:modelValue":l[2]||(l[2]=i=>o.adjustmentFrequency=i),placeholder:"请选择调整频率"},{default:t(()=>[e(n,{label:"每小时",value:"hourly"}),e(n,{label:"每天",value:"daily"}),e(n,{label:"每周",value:"weekly"})]),_:1},8,["modelValue"])]),_:1}),e(s,{label:"最大价格波动"},{default:t(()=>[e(z,{modelValue:o.maxPriceChange,"onUpdate:modelValue":l[3]||(l[3]=i=>o.maxPriceChange=i),min:0,max:50,step:5,"format-tooltip":i=>i+"%"},null,8,["modelValue","format-tooltip"]),a("span",re,d(o.maxPriceChange)+"%",1)]),_:1}),e(s,{label:"启用价格优化"},{default:t(()=>[e(X,{modelValue:o.enableOptimization,"onUpdate:modelValue":l[4]||(l[4]=i=>o.enableOptimization=i)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1}),o.baseStrategy==="time_based"?(b(),V(c,{key:0,class:"price-card"},{header:t(()=>[...l[22]||(l[22]=[a("div",{class:"card-header"},[a("span",null,"分时定价配置")],-1)])]),default:t(()=>[e(Y,{data:T,stripe:"",style:{width:"100%"}},{default:t(()=>[e(O,{prop:"timeSlot",label:"时间段",width:"120"}),e(O,{prop:"priceMultiplier",label:"价格倍数",width:"120"},{default:t(({row:i})=>[e(k,{modelValue:i.priceMultiplier,"onUpdate:modelValue":Z=>i.priceMultiplier=Z,min:.5,max:3,step:.1,precision:1,size:"small"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(O,{prop:"actualPrice",label:"实际价格",width:"120"},{default:t(({row:i})=>[W(d((o.basePrice*i.priceMultiplier).toFixed(2))+" 元/kWh ",1)]),_:1}),e(O,{prop:"description",label:"说明"})]),_:1},8,["data"])]),_:1})):S("",!0),o.baseStrategy==="dynamic"?(b(),V(c,{key:1,class:"price-card"},{header:t(()=>[...l[23]||(l[23]=[a("div",{class:"card-header"},[a("span",null,"动态定价参数")],-1)])]),default:t(()=>[e(E,{model:r,"label-width":"120px"},{default:t(()=>[e(s,{label:"需求敏感度"},{default:t(()=>[e(z,{modelValue:r.demandSensitivity,"onUpdate:modelValue":l[5]||(l[5]=i=>r.demandSensitivity=i),min:0,max:1,step:.1,"format-tooltip":i=>i.toFixed(1)},null,8,["modelValue","format-tooltip"]),a("span",ue,d(r.demandSensitivity.toFixed(1)),1)]),_:1}),e(s,{label:"竞争敏感度"},{default:t(()=>[e(z,{modelValue:r.competitionSensitivity,"onUpdate:modelValue":l[6]||(l[6]=i=>r.competitionSensitivity=i),min:0,max:1,step:.1,"format-tooltip":i=>i.toFixed(1)},null,8,["modelValue","format-tooltip"]),a("span",pe,d(r.competitionSensitivity.toFixed(1)),1)]),_:1}),e(s,{label:"成本因子"},{default:t(()=>[e(z,{modelValue:r.costFactor,"onUpdate:modelValue":l[7]||(l[7]=i=>r.costFactor=i),min:0,max:2,step:.1,"format-tooltip":i=>i.toFixed(1)},null,8,["modelValue","format-tooltip"]),a("span",me,d(r.costFactor.toFixed(1)),1)]),_:1}),e(s,{label:"价格弹性"},{default:t(()=>[e(z,{modelValue:r.priceElasticity,"onUpdate:modelValue":l[8]||(l[8]=i=>r.priceElasticity=i),min:-2,max:0,step:.1,"format-tooltip":i=>i.toFixed(1)},null,8,["modelValue","format-tooltip"]),a("span",ve,d(r.priceElasticity.toFixed(1)),1)]),_:1})]),_:1},8,["model"])]),_:1})):S("",!0),o.baseStrategy==="competitive"?(b(),V(c,{key:2,class:"price-card"},{header:t(()=>[...l[24]||(l[24]=[a("div",{class:"card-header"},[a("span",null,"竞争定价配置")],-1)])]),default:t(()=>[e(E,{model:m,"label-width":"120px"},{default:t(()=>[e(s,{label:"竞争对手价格"},{default:t(()=>[e(k,{modelValue:m.competitorPrice,"onUpdate:modelValue":l[9]||(l[9]=i=>m.competitorPrice=i),min:.5,max:2,step:.01,precision:2},null,8,["modelValue"]),l[25]||(l[25]=a("span",{style:{"margin-left":"10px"}},"元/kWh",-1))]),_:1}),e(s,{label:"价格策略"},{default:t(()=>[e(x,{modelValue:m.pricingStrategy,"onUpdate:modelValue":l[10]||(l[10]=i=>m.pricingStrategy=i),placeholder:"请选择价格策略"},{default:t(()=>[e(n,{label:"价格匹配",value:"match"}),e(n,{label:"略低于竞争对手",value:"below"}),e(n,{label:"略高于竞争对手",value:"above"})]),_:1},8,["modelValue"])]),_:1}),m.pricingStrategy!=="match"?(b(),V(s,{key:0,label:"价格差异"},{default:t(()=>[e(k,{modelValue:m.priceDifference,"onUpdate:modelValue":l[11]||(l[11]=i=>m.priceDifference=i),min:.01,max:.5,step:.01,precision:2},null,8,["modelValue"]),l[26]||(l[26]=a("span",{style:{"margin-left":"10px"}},"元/kWh",-1))]),_:1})):S("",!0)]),_:1},8,["model"])]),_:1})):S("",!0),o.enableOptimization?(b(),V(c,{key:3,class:"price-card"},{header:t(()=>[...l[27]||(l[27]=[a("div",{class:"card-header"},[a("span",null,"价格优化配置")],-1)])]),default:t(()=>[e(E,{model:p,"label-width":"120px"},{default:t(()=>[e(s,{label:"优化目标"},{default:t(()=>[e(x,{modelValue:p.optimizationGoal,"onUpdate:modelValue":l[12]||(l[12]=i=>p.optimizationGoal=i),placeholder:"请选择优化目标"},{default:t(()=>[e(n,{label:"最大化收益",value:"revenue"}),e(n,{label:"最大化利用率",value:"utilization"}),e(n,{label:"平衡收益和利用率",value:"balanced"})]),_:1},8,["modelValue"])]),_:1}),e(s,{label:"优化算法"},{default:t(()=>[e(x,{modelValue:p.optimizationAlgorithm,"onUpdate:modelValue":l[13]||(l[13]=i=>p.optimizationAlgorithm=i),placeholder:"请选择优化算法"},{default:t(()=>[e(n,{label:"梯度下降",value:"gradient"}),e(n,{label:"遗传算法",value:"genetic"}),e(n,{label:"粒子群优化",value:"pso"})]),_:1},8,["modelValue"])]),_:1}),e(s,{label:"优化频率"},{default:t(()=>[e(x,{modelValue:p.optimizationFrequency,"onUpdate:modelValue":l[14]||(l[14]=i=>p.optimizationFrequency=i),placeholder:"请选择优化频率"},{default:t(()=>[e(n,{label:"实时优化",value:"realtime"}),e(n,{label:"每小时",value:"hourly"}),e(n,{label:"每天",value:"daily"})]),_:1},8,["modelValue"])]),_:1}),e(s,{label:"历史数据天数"},{default:t(()=>[e(k,{modelValue:p.historyDays,"onUpdate:modelValue":l[15]||(l[15]=i=>p.historyDays=i),min:7,max:365},null,8,["modelValue"]),l[28]||(l[28]=a("span",{style:{"margin-left":"10px"}},"天",-1))]),_:1})]),_:1},8,["model"])]),_:1})):S("",!0),e(c,{class:"price-card"},{header:t(()=>[...l[29]||(l[29]=[a("div",{class:"card-header"},[a("span",null,"价格预览")],-1)])]),default:t(()=>[a("div",ce,[e(R,{gutter:20},{default:t(()=>[e(f,{span:8},{default:t(()=>[a("div",fe,[l[30]||(l[30]=a("div",{class:"preview-label"},"当前价格",-1)),a("div",be,d(w.value.toFixed(2))+" 元/kWh",1)])]),_:1}),e(f,{span:8},{default:t(()=>[a("div",_e,[l[31]||(l[31]=a("div",{class:"preview-label"},"建议价格",-1)),a("div",ye,d(U.value.toFixed(2))+" 元/kWh",1)])]),_:1}),e(f,{span:8},{default:t(()=>[a("div",ge,[l[32]||(l[32]=a("div",{class:"preview-label"},"价格变化",-1)),a("div",{class:G(["preview-value",{positive:_.value>0,negative:_.value<0}])},d(_.value>0?"+":"")+d(_.value.toFixed(2))+" 元/kWh ",3)])]),_:1})]),_:1}),a("div",{ref_key:"priceChart",ref:q,style:{height:"300px","margin-top":"20px"}},null,512)])]),_:1}),e(c,{class:"price-card"},{header:t(()=>[...l[33]||(l[33]=[a("div",{class:"card-header"},[a("span",null,"收益预测")],-1)])]),default:t(()=>[a("div",xe,[e(R,{gutter:20},{default:t(()=>[e(f,{span:6},{default:t(()=>[a("div",Ve,[l[34]||(l[34]=a("div",{class:"revenue-label"},"当前策略收益",-1)),a("div",Se,d(P.value.toFixed(0))+" 元/天",1)])]),_:1}),e(f,{span:6},{default:t(()=>[a("div",we,[l[35]||(l[35]=a("div",{class:"revenue-label"},"建议策略收益",-1)),a("div",Pe,d(M.value.toFixed(0))+" 元/天",1)])]),_:1}),e(f,{span:6},{default:t(()=>[a("div",Fe,[l[36]||(l[36]=a("div",{class:"revenue-label"},"收益提升",-1)),a("div",{class:G(["revenue-value",{positive:y.value>0,negative:y.value<0}])},d(y.value>0?"+":"")+d(y.value.toFixed(0))+" 元/天 ",3)])]),_:1}),e(f,{span:6},{default:t(()=>[a("div",he,[l[37]||(l[37]=a("div",{class:"revenue-label"},"提升百分比",-1)),a("div",{class:G(["revenue-value",{positive:F.value>0,negative:F.value<0}])},d(F.value>0?"+":"")+d(F.value.toFixed(1))+"% ",3)])]),_:1})]),_:1})])]),_:1})])}}},Me=ee(ke,[["__scopeId","data-v-71d38fb4"]]);export{Me as default};
