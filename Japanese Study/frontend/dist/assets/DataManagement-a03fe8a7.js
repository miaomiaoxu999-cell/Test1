import{_ as X,r as m,i as z,a as n,b as x,c as E,e as f,d as e,w as t,E as r,u as y,j as Z,h as s,g as ee,k as le,n as te,p as ae,F as oe,q as ne,s as se,v as de}from"./index-273e1fb1.js";const re={class:"data-management"},ue={class:"page-header"},ie={class:"header-actions"},pe={class:"pagination"},ce={__name:"DataManagement",setup(me){const g=m(!1),b=m(1),w=m(10),M=m(100),u=z({dateRange:[],stationId:"",dataType:""}),v=z({fileType:"csv",file:null}),C=m([]),k=m([]),B=m([{id:1,stationName:"北京朝阳站",timeSlot:"2023-10-01 08:00:00",chargingAmount:120.5,electricityPrice:.8,temperature:25.3,trafficFlow:156,dataQuality:"优秀",createdAt:"2023-10-01 09:00:00"},{id:2,stationName:"上海浦东站",timeSlot:"2023-10-01 09:00:00",chargingAmount:98.7,electricityPrice:.85,temperature:28.1,trafficFlow:189,dataQuality:"良好",createdAt:"2023-10-01 10:00:00"}]),F=()=>{r.success("查询成功"),b.value=1},T=()=>{Object.keys(u).forEach(o=>{u[o]=""}),u.dateRange=[]},A=()=>{r.success("导出成功")},I=()=>{r.success("数据已刷新")},N=o=>{r.info(`编辑数据 ID: ${o.id}`)},Q=async o=>{try{await se.confirm("确定要删除这条数据吗？","提示",{type:"warning"}),r.success("删除成功")}catch{}},R=o=>{w.value=o},P=o=>{b.value=o},$=o=>{const l=o.type==="text/csv"||o.name.endsWith(".csv"),_=o.type==="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"||o.name.endsWith(".xlsx");return!l&&!_?(r.error("只能上传 CSV 或 Excel 文件！"),!1):o.size/1024/1024<10?(v.file=o,C.value=[{时间:"2023-10-01 08:00",充电量:"120.5",电价:"0.8",温度:"25.3"},{时间:"2023-10-01 09:00",充电量:"98.7",电价:"0.85",温度:"28.1"}],k.value=["时间","充电量","电价","温度"],!1):(r.error("文件大小不能超过 10MB！"),!1)},W=()=>{r.success("上传成功")},Y=()=>{r.error("上传失败")},j=()=>{if(!v.file){r.warning("请先选择文件");return}r.success("数据上传成功"),g.value=!1};return(o,l)=>{const _=n("el-icon"),i=n("el-button"),L=n("el-date-picker"),c=n("el-form-item"),p=n("el-option"),V=n("el-select"),h=n("el-form"),S=n("el-card"),d=n("el-table-column"),q=n("el-tag"),D=n("el-table"),O=n("el-pagination"),U=n("el-radio"),G=n("el-radio-group"),H=n("el-upload"),J=n("el-dialog");return x(),E("div",re,[f("div",ue,[l[12]||(l[12]=f("h2",null,"数据管理",-1)),f("div",ie,[e(i,{type:"primary",onClick:l[0]||(l[0]=a=>g.value=!0)},{default:t(()=>[e(_,null,{default:t(()=>[e(y(Z))]),_:1}),l[9]||(l[9]=s(" 上传数据 ",-1))]),_:1}),e(i,{type:"success",onClick:A},{default:t(()=>[e(_,null,{default:t(()=>[e(y(ee))]),_:1}),l[10]||(l[10]=s(" 导出数据 ",-1))]),_:1}),e(i,{onClick:I},{default:t(()=>[e(_,null,{default:t(()=>[e(y(le))]),_:1}),l[11]||(l[11]=s(" 刷新 ",-1))]),_:1})])]),e(S,{class:"filter-card"},{default:t(()=>[e(h,{model:u,inline:""},{default:t(()=>[e(c,{label:"时间范围"},{default:t(()=>[e(L,{modelValue:u.dateRange,"onUpdate:modelValue":l[1]||(l[1]=a=>u.dateRange=a),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"YYYY-MM-DD"},null,8,["modelValue"])]),_:1}),e(c,{label:"充电站"},{default:t(()=>[e(V,{modelValue:u.stationId,"onUpdate:modelValue":l[2]||(l[2]=a=>u.stationId=a),placeholder:"请选择充电站"},{default:t(()=>[e(p,{label:"全部",value:""}),e(p,{label:"北京朝阳站",value:"1"}),e(p,{label:"上海浦东站",value:"2"}),e(p,{label:"广州天河站",value:"3"})]),_:1},8,["modelValue"])]),_:1}),e(c,{label:"数据类型"},{default:t(()=>[e(V,{modelValue:u.dataType,"onUpdate:modelValue":l[3]||(l[3]=a=>u.dataType=a),placeholder:"请选择数据类型"},{default:t(()=>[e(p,{label:"全部",value:""}),e(p,{label:"历史充电数据",value:"charging"}),e(p,{label:"变量数据",value:"variable"}),e(p,{label:"预测结果",value:"prediction"})]),_:1},8,["modelValue"])]),_:1}),e(c,null,{default:t(()=>[e(i,{type:"primary",onClick:F},{default:t(()=>[...l[13]||(l[13]=[s("查询",-1)])]),_:1}),e(i,{onClick:T},{default:t(()=>[...l[14]||(l[14]=[s("重置",-1)])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(S,null,{default:t(()=>[e(D,{data:B.value,stripe:"",style:{width:"100%"}},{default:t(()=>[e(d,{prop:"id",label:"ID",width:"80"}),e(d,{prop:"stationName",label:"充电站",width:"120"}),e(d,{prop:"timeSlot",label:"时间",width:"180"}),e(d,{prop:"chargingAmount",label:"充电量(kWh)",width:"120"}),e(d,{prop:"electricityPrice",label:"电价(元/kWh)",width:"120"}),e(d,{prop:"temperature",label:"温度(℃)",width:"100"}),e(d,{prop:"trafficFlow",label:"车流量",width:"100"}),e(d,{prop:"dataQuality",label:"数据质量",width:"100"},{default:t(({row:a})=>[e(q,{type:a.dataQuality==="优秀"?"success":a.dataQuality==="良好"?"warning":"danger"},{default:t(()=>[s(te(a.dataQuality),1)]),_:2},1032,["type"])]),_:1}),e(d,{prop:"createdAt",label:"创建时间",width:"180"}),e(d,{label:"操作",width:"150",fixed:"right"},{default:t(({row:a})=>[e(i,{type:"text",size:"small",onClick:K=>N(a)},{default:t(()=>[...l[15]||(l[15]=[s("编辑",-1)])]),_:1},8,["onClick"]),e(i,{type:"text",size:"small",onClick:K=>Q(a),style:{color:"#f56c6c"}},{default:t(()=>[...l[16]||(l[16]=[s("删除",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"]),f("div",pe,[e(O,{"current-page":b.value,"onUpdate:currentPage":l[4]||(l[4]=a=>b.value=a),"page-size":w.value,"onUpdate:pageSize":l[5]||(l[5]=a=>w.value=a),"page-sizes":[10,20,50,100],total:M.value,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:R,onCurrentChange:P},null,8,["current-page","page-size","total"])])]),_:1}),e(J,{modelValue:g.value,"onUpdate:modelValue":l[8]||(l[8]=a=>g.value=a),title:"上传数据",width:"500px"},{footer:t(()=>[e(i,{onClick:l[7]||(l[7]=a=>g.value=!1)},{default:t(()=>[...l[21]||(l[21]=[s("取消",-1)])]),_:1}),e(i,{type:"primary",onClick:j},{default:t(()=>[...l[22]||(l[22]=[s("确认上传",-1)])]),_:1})]),default:t(()=>[e(h,{model:v,"label-width":"100px"},{default:t(()=>[e(c,{label:"文件格式"},{default:t(()=>[e(G,{modelValue:v.fileType,"onUpdate:modelValue":l[6]||(l[6]=a=>v.fileType=a)},{default:t(()=>[e(U,{label:"csv"},{default:t(()=>[...l[17]||(l[17]=[s("CSV文件",-1)])]),_:1}),e(U,{label:"excel"},{default:t(()=>[...l[18]||(l[18]=[s("Excel文件",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(c,{label:"数据文件"},{default:t(()=>[e(H,{class:"upload-demo",drag:"",action:"#","before-upload":$,"on-success":W,"on-error":Y},{tip:t(()=>[...l[19]||(l[19]=[f("div",{class:"el-upload__tip"}," 支持 csv/xlsx 格式文件，大小不超过10MB ",-1)])]),default:t(()=>[e(_,{class:"el-icon--upload"},{default:t(()=>[e(y(ae))]),_:1}),l[20]||(l[20]=f("div",{class:"el-upload__text"},[s(" 将文件拖到此处，或"),f("em",null,"点击上传")],-1))]),_:1})]),_:1}),e(c,{label:"数据预览"},{default:t(()=>[e(D,{data:C.value,height:"200",style:{width:"100%"}},{default:t(()=>[(x(!0),E(oe,null,ne(k.value,a=>(x(),de(d,{key:a,prop:a,label:a},null,8,["prop","label"]))),128))]),_:1},8,["data"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}},_e=X(ce,[["__scopeId","data-v-54a62859"]]);export{_e as default};
